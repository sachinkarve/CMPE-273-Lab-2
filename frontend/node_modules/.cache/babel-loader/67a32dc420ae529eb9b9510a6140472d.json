{"ast":null,"code":"var _jsxFileName = \"/Users/sachinkarve/Documents/GitHub/Lab1-014153425/frontend/react-frontend/src/components/Viewitemandsections.js\";\nimport React, { Component } from 'react';\nimport cookie from 'react-cookies';\nimport { Redirect } from 'react-router';\nimport { Link } from 'react-router-dom';\nimport Navbar from './Navbar.js';\nimport { Row, Card, Container, Button, Col } from 'react-bootstrap';\nimport axios from 'axios';\nimport item_placeholder from '../images/item_placeholder.jpg';\nimport URL from '../config';\n\nclass Viewitemandsections extends Component {\n  constructor(props) {\n    super(props);\n\n    this.SectionAndItemDisplayer = () => {\n      let section;\n      let itemArray = [];\n      console.log(\"SectionAndItemDisplayer\");\n      console.log(this.state.allSections);\n\n      for (let i = 0; i < this.state.allSections.length; i++) {\n        section = this.state.allSections[i].menu_section_name;\n        itemArray.push(this.itemFetcher(this.state.allSections[i]));\n      }\n\n      console.log(itemArray);\n      return itemArray;\n    };\n\n    this.getSections = () => {\n      console.log(\"inside getSections\");\n      axios.defaults.withCredentials = true;\n      axios.defaults.headers.common['authorization'] = localStorage.getItem('token');\n      axios.get(\"\".concat(URL, \"/section/getallsections/\").concat(this.state.user_id)).then(response => {\n        this.setState({\n          allSections: response.data\n        });\n        console.log(\"below is allsections from state\");\n        console.log(this.state.allSections);\n      }).catch(err => {\n        console.log(\"error occured:: \".concat(err));\n        this.setState({\n          sectionsError: true\n        });\n      });\n      console.log(\"finished getSections\");\n    };\n\n    this.getItems = () => {\n      console.log(\"inside getItems\");\n      axios.defaults.withCredentials = true;\n      axios.defaults.headers.common['authorization'] = localStorage.getItem('token');\n      axios.get(\"\".concat(URL, \"/item/getallitems/\").concat(this.state.user_id)).then(response => {\n        this.setState({\n          allItems: response.data\n        });\n        console.log(\"below is allItems from state\");\n        console.log(this.state.allItems);\n      }).catch(err => {\n        console.log(\"error occured:: \".concat(err));\n        this.setState({\n          itemError: true\n        });\n      });\n      console.log(\"finished getItems\");\n    };\n\n    this.state = {\n      allSections: [],\n      user_id: localStorage.getItem(\"user_id\"),\n      sectionsError: false,\n      allItems: [],\n      itemError: false\n    };\n    this.getSections();\n    this.getItems();\n  }\n\n  itemFetcher(menu_section) {\n    let existingItem = [];\n    let secItems = [];\n    let sectionVar = React.createElement(Card, {\n      style: {\n        height: '5rem',\n        width: '25rem'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 34\n      },\n      __self: this\n    }, React.createElement(Card.Body, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 35\n      },\n      __self: this\n    }, React.createElement(Card.Text, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37\n      },\n      __self: this\n    }, \" \", menu_section.menu_section_name))));\n    existingItem.push(sectionVar);\n    secItems = this.state.allItems.filter(item => item.menu_section_id === menu_section.menu_section_id);\n    secItems = secItems.map(item => React.createElement(Card, {\n      style: {\n        height: '18rem',\n        width: '20rem'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46\n      },\n      __self: this\n    }, React.createElement(Card.Img, {\n      variant: \"top\",\n      style: {\n        height: '10rem',\n        width: '20rem'\n      },\n      src: item_placeholder,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47\n      },\n      __self: this\n    }), React.createElement(Card.Body, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, React.createElement(Card.Text, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49\n      },\n      __self: this\n    }, React.createElement(\"h8\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }, item.item_name), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }), React.createElement(\"h8\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, item.item_price), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }), React.createElement(\"h8\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, item.item_description), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    })))));\n    existingItem.push(...secItems);\n    return existingItem;\n  }\n\n  render() {\n    let redirectvar = null;\n    let output = [];\n\n    if (!localStorage.getItem('token')) {\n      redirectvar = React.createElement(Redirect, {\n        to: \"/login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      });\n    }\n\n    if (this.state.allItems.length > 0 && this.state.allSections.length > 0) {\n      output = this.SectionAndItemDisplayer();\n      console.log(output);\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, redirectvar, React.createElement(Navbar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }), React.createElement(Container, {\n      fluid: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }), React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, \"Menu\"), output), React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    })), React.createElement(Link, {\n      to: \"/updatemenu\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(Button, {\n      variant: \"link\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, \"Update Menu\"))));\n  }\n\n}\n\nexport default Viewitemandsections;","map":{"version":3,"sources":["/Users/sachinkarve/Documents/GitHub/Lab1-014153425/frontend/react-frontend/src/components/Viewitemandsections.js"],"names":["React","Component","cookie","Redirect","Link","Navbar","Row","Card","Container","Button","Col","axios","item_placeholder","URL","Viewitemandsections","constructor","props","SectionAndItemDisplayer","section","itemArray","console","log","state","allSections","i","length","menu_section_name","push","itemFetcher","getSections","defaults","withCredentials","headers","common","localStorage","getItem","get","user_id","then","response","setState","data","catch","err","sectionsError","getItems","allItems","itemError","menu_section","existingItem","secItems","sectionVar","height","width","filter","item","menu_section_id","map","item_name","item_price","item_description","render","redirectvar","output"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport cookie from 'react-cookies';\nimport { Redirect } from 'react-router';\nimport { Link } from 'react-router-dom'\nimport Navbar from './Navbar.js'\nimport { Row, Card, Container, Button, Col } from 'react-bootstrap';\nimport axios from 'axios';\nimport item_placeholder from '../images/item_placeholder.jpg'\nimport URL from '../config'\n\n\nclass Viewitemandsections extends Component {\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            allSections: [],\n            user_id: localStorage.getItem(\"user_id\"),\n            sectionsError: false,\n\n            allItems: [],\n            itemError: false,\n        }\n        this.getSections();\n        this.getItems();\n\n    }\n\n\n    itemFetcher(menu_section) {\n        let existingItem = [];\n        let secItems = [];\n\n        let sectionVar = (<Card style={{ height: '5rem', width: '25rem' }}>\n            <Card.Body>\n                <Card.Text>\n                   <h2> {menu_section.menu_section_name }</h2>\n                </Card.Text>\n            </Card.Body>\n        </Card>)\n\n        existingItem.push(sectionVar);\n        secItems = this.state.allItems.filter(item => item.menu_section_id === menu_section.menu_section_id);\n        secItems = secItems.map(item =>\n            (\n                <Card style={{ height: '18rem', width: '20rem' }}>\n                    <Card.Img variant=\"top\" style={{ height: '10rem', width: '20rem' }} src={item_placeholder} />\n                    <Card.Body>\n                        <Card.Text>\n                            <h8>{item.item_name}</h8><br />\n                            <h8>{item.item_price}</h8><br />\n                            <h8>{item.item_description}</h8><br />\n                        </Card.Text>\n                    </Card.Body>\n                </Card>\n\n            )\n        )\n\n        existingItem.push(...secItems);\n        return existingItem;\n    }\n\n    SectionAndItemDisplayer = () => {\n\n        let section;\n        let itemArray = [];\n        console.log(`SectionAndItemDisplayer`);\n        console.log(this.state.allSections);\n        for (let i = 0; i < this.state.allSections.length; i++) {\n            section = this.state.allSections[i].menu_section_name;\n            itemArray.push(this.itemFetcher(this.state.allSections[i]));\n        }\n        console.log(itemArray);\n        return itemArray;\n    }\n\n\n    getSections = () => {\n        console.log(`inside getSections`);\n        axios.defaults.withCredentials = true;\n        axios.defaults.headers.common['authorization']= localStorage.getItem('token')\n        axios.get(`${URL}/section/getallsections/${this.state.user_id}`)\n            .then(response => {\n                this.setState({\n                    allSections: response.data\n                })\n                console.log(`below is allsections from state`);\n                console.log(this.state.allSections);\n\n            })\n            .catch(err => {\n                console.log(`error occured:: ${err}`);\n                this.setState({\n                    sectionsError: true\n                })\n            });\n        console.log(`finished getSections`);\n    }\n\n\n    getItems = () => {\n        console.log(`inside getItems`);\n        axios.defaults.withCredentials = true;\n        axios.defaults.headers.common['authorization']= localStorage.getItem('token')\n        axios.get(`${URL}/item/getallitems/${this.state.user_id}`)\n            .then(response => {\n                this.setState({\n                    allItems: response.data\n                })\n                console.log(`below is allItems from state`);\n                console.log(this.state.allItems);\n            })\n            .catch(err => {\n                console.log(`error occured:: ${err}`);\n                this.setState({\n                    itemError: true\n                })\n            });\n        console.log(`finished getItems`);\n\n    }\n\n\n\n    render() {\n        let redirectvar = null;\n        let output = [];\n        if (!localStorage.getItem('token')) {\n            redirectvar = <Redirect to=\"/login\" />\n        }\n\n        if (this.state.allItems.length > 0 && this.state.allSections.length > 0) {\n            output = this.SectionAndItemDisplayer();\n            console.log(output);\n        }\n\n        return (\n            <div>\n                {redirectvar}\n                <Navbar />\n\n                <Container fluid={true}>\n                    <Row>\n                        <Col>\n                        </Col>\n                        <Col>\n                            <h1>Menu</h1>\n\n                            {output}\n                        </Col>\n                        <Col></Col>\n                    </Row>\n                    <Link to=\"/updatemenu\"><Button variant=\"link\">Update Menu</Button></Link>\n\n                </Container>\n            </div>\n        )\n    }\n}\nexport default Viewitemandsections\n"]},"metadata":{},"sourceType":"module"}