{"ast":null,"code":"var _jsxFileName = \"/Users/sachinkarve/Documents/GitHub/Lab1-014153425/frontend/react-frontend/src/components/CustomerHome.js\";\nimport React, { Component } from 'react';\nimport Navbar from './Navbar.js';\nimport axios from 'axios';\nimport { Redirect } from 'react-router';\nimport cookie from 'react-cookies';\nimport RestaurantCard from \"./RestaurantCard\";\nimport { Col, Row, FormControl, Button, InputGroup, DropdownButton, Dropdown, Alert } from 'react-bootstrap';\nimport URL from '../config';\n\nclass CustomerHome extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onChange = e => {\n      this.setState({\n        [e.target.name]: e.target.value,\n        noRecord: false\n      });\n    };\n\n    this.onSearch = e => {\n      e.preventDefault();\n      var searchInput = this.state.search_input;\n      axios.defaults.headers.common['authorization'] = localStorage.getItem('token');\n      axios.get(\"\".concat(URL, \"/restaurant/searchrestaurant/\").concat(searchInput)).then(response => {\n        var cuisines = [];\n\n        if (response.data) {\n          if (response.data[0].search_result === 'NO_RECORD') {\n            this.setState({\n              noRecord: true\n            });\n          } else {\n            for (var i = 0; i < response.data.length; i++) {\n              cuisines.push(response.data[i].res_cuisine);\n            }\n\n            this.setState({\n              displayRestaurants: response.data,\n              cuisineList: cuisines,\n              noRecord: false,\n              restaurantList: response.data\n            });\n          }\n        }\n      }).catch(er => {\n        if (er.response && er.response.data) {\n          console.log(er.response.data);\n        }\n      });\n    };\n\n    this.onCuisineSelect = e => {\n      var restaurantListAfterCuisineSelect = this.state.restaurantList.filter(restaurant => restaurant.res_cuisine === e.target.text);\n      this.setState({\n        displayRestaurants: restaurantListAfterCuisineSelect\n      });\n    };\n\n    this.setState({\n      search_input: \"\",\n      noRecord: false\n    });\n    this.onCuisineSelect = this.onCuisineSelect.bind(this);\n    this.onChange = this.onChange.bind(this);\n    this.onSearch = this.onSearch.bind(this);\n  }\n\n  render() {\n    let redirectvar = null;\n    let homeRender = null;\n\n    if (!localStorage.getItem(\"token\")) {\n      redirectvar = React.createElement(Redirect, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      });\n    }\n\n    var errorMsg = null,\n        cuisineSelectDropdown = null,\n        restaurantCards = null;\n\n    if (this.state && this.state.cuisineList) {\n      cuisineSelectDropdown = this.state.cuisineList.map(cuisine => {\n        return React.createElement(Dropdown.Item, {\n          href: \"#\",\n          onClick: this.onCuisineSelect,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84\n          },\n          __self: this\n        }, cuisine);\n      });\n    }\n\n    if (this.state && this.state.displayRestaurants) {\n      restaurantCards = this.state.displayRestaurants.map(restaurant => {\n        return React.createElement(Col, {\n          sm: 3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92\n          },\n          __self: this\n        }, React.createElement(RestaurantCard, {\n          restaurant: restaurant,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 93\n          },\n          __self: this\n        }));\n      });\n    }\n\n    if (this.state && this.state.noRecord) {\n      errorMsg = React.createElement(Alert, {\n        style: {\n          width: '60%'\n        },\n        variant: \"danger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, \"No results found, please try again with different inputs..!\");\n    } else {\n      errorMsg = null;\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(Navbar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }), React.createElement(\"center\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, \"Hungry? Search your food here\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }), React.createElement(\"form\", {\n      onSubmit: this.onSearch,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(InputGroup, {\n      style: {\n        width: '50%'\n      },\n      size: \"lg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(FormControl, {\n      placeholder: \"You name it, we've got it!\",\n      name: \"search_input\",\n      \"aria-label\": \"Search Restaurants\",\n      required: true,\n      onChange: this.onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }), React.createElement(InputGroup.Append, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(Button, {\n      variant: \"primary\",\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, \"Search\")), React.createElement(DropdownButton, {\n      as: InputGroup.Append,\n      variant: \"outline-secondary\",\n      title: \"Cuisine\",\n      id: \"input-group-dropdown-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, cuisineSelectDropdown))), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }), errorMsg, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, restaurantCards)));\n  }\n\n}\n\nexport default CustomerHome;","map":{"version":3,"sources":["/Users/sachinkarve/Documents/GitHub/Lab1-014153425/frontend/react-frontend/src/components/CustomerHome.js"],"names":["React","Component","Navbar","axios","Redirect","cookie","RestaurantCard","Col","Row","FormControl","Button","InputGroup","DropdownButton","Dropdown","Alert","URL","CustomerHome","constructor","props","onChange","e","setState","target","name","value","noRecord","onSearch","preventDefault","searchInput","state","search_input","defaults","headers","common","localStorage","getItem","get","then","response","cuisines","data","search_result","i","length","push","res_cuisine","displayRestaurants","cuisineList","restaurantList","catch","er","console","log","onCuisineSelect","restaurantListAfterCuisineSelect","filter","restaurant","text","bind","render","redirectvar","homeRender","errorMsg","cuisineSelectDropdown","restaurantCards","map","cuisine","width","Append"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Navbar from './Navbar.js';\nimport axios from 'axios';\nimport { Redirect } from 'react-router';\nimport cookie from 'react-cookies';\nimport RestaurantCard from \"./RestaurantCard\";\nimport { Col, Row,FormControl, Button,InputGroup, DropdownButton, Dropdown, Alert,  } from 'react-bootstrap';\nimport URL from '../config'\nclass CustomerHome extends Component {\n    constructor(props) {\n        super(props);\n        this.setState({\n            search_input: \"\",\n            noRecord: false\n        });\n        this.onCuisineSelect = this.onCuisineSelect.bind(this);\n        this.onChange = this.onChange.bind(this);\n        this.onSearch = this.onSearch.bind(this);\n    }\n\n    onChange = (e) => {\n        this.setState({\n            [e.target.name]: e.target.value,\n            noRecord: false\n        });\n    }\n\n    onSearch = (e) => {\n        e.preventDefault();\n        var searchInput = this.state.search_input;\n        axios.defaults.headers.common['authorization']= localStorage.getItem('token') \n        axios.get(`${URL}/restaurant/searchrestaurant/${searchInput}`)\n            .then(response => {\n                var cuisines = [];\n                if (response.data) {\n                    if (response.data[0].search_result === 'NO_RECORD') {\n                        this.setState({\n                            noRecord: true,\n                        });\n                    }\n                    else {\n                        for (var i = 0; i < response.data.length; i++) {\n                            cuisines.push(response.data[i].res_cuisine)\n                        }\n                        this.setState({\n                            displayRestaurants: response.data,\n                            cuisineList: cuisines,\n                            noRecord: false,\n                            restaurantList: response.data,\n\n                        });\n                    }\n                }\n            })\n            .catch(er => {\n                if (er.response && er.response.data) {\n                    console.log(er.response.data);\n                }\n            })\n    }\n\n    onCuisineSelect = (e) => {\n        var restaurantListAfterCuisineSelect = this.state.restaurantList.filter(restaurant => restaurant.res_cuisine === e.target.text);\n        this.setState({\n            displayRestaurants: restaurantListAfterCuisineSelect\n        });\n    }\n\n\n    render() {\n\n    let redirectvar = null;\n        let homeRender = null;\n        if (!localStorage.getItem(\"token\")) {\n            redirectvar = <Redirect to=\"/\" />\n        }\n\n        var errorMsg = null,\n        cuisineSelectDropdown = null,\n            restaurantCards = null;\n        if (this.state && this.state.cuisineList) {\n            cuisineSelectDropdown = this.state.cuisineList.map(cuisine => {\n                return (\n                    <Dropdown.Item href=\"#\" onClick={this.onCuisineSelect}>{cuisine}</Dropdown.Item>\n                )\n            })\n        }\n\n        if (this.state && this.state.displayRestaurants) {\n            restaurantCards = this.state.displayRestaurants.map(restaurant => {\n                return (\n                    <Col sm={3}>\n                        <RestaurantCard restaurant={restaurant} />\n                    </Col>\n                );\n            });\n        }\n\n        if (this.state && this.state.noRecord) {\n            errorMsg = (\n                <Alert style={{ width: '60%' }} variant=\"danger\">\n                    No results found, please try again with different inputs..!\n                </Alert>\n            );\n        }\n        else {\n            errorMsg = null;\n        }\n\n        return (\n            <div>\n            <Navbar/>\n                <center><br /><br />\n                    <h3>Hungry? Search your food here</h3>\n                    <br />\n                    <form onSubmit={this.onSearch}>\n                        <InputGroup style={{ width: '50%' }} size=\"lg\">\n                            <FormControl\n                                placeholder=\"You name it, we've got it!\"\n                                name=\"search_input\"\n                                aria-label=\"Search Restaurants\"\n\n                                required = {true}\n                                onChange={this.onChange}\n                            />\n                            <InputGroup.Append>\n                                <Button variant=\"primary\" type=\"submit\">Search</Button>\n                            </InputGroup.Append>\n                           \n\n                            <DropdownButton\n                                as={InputGroup.Append}\n                                variant=\"outline-secondary\"\n                                title=\"Cuisine\"\n                                id=\"input-group-dropdown-2\"\n                            >\n                                {cuisineSelectDropdown}\n                            </DropdownButton>\n\n\n                        </InputGroup>\n                    </form>\n                    <br />\n                    <br />\n                    <br/>\n                    {errorMsg}\n                    <Row>{restaurantCards}</Row>\n                </center>\n            </div>\n        )\n    }\n}\n\nexport default CustomerHome;"]},"metadata":{},"sourceType":"module"}